:root {
  --primary-color: #6a7dfe;
  --secondary-color: #2c2f48;
  --background-color: #1e1e2f;
  --text-color: #e0e0e0;
  --grid-color-minor: rgba(255, 255, 255, 0.08);
  --grid-color-major: rgba(255, 255, 255, 0.15);
  --axis-color: rgba(255, 255, 255, 0.6);
  --error-color: #ff5c5c;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  margin: 0;
  overflow: hidden;
}

.app-container {
  display: flex;
  height: 100vh;
}

/* --- Panel Lateral --- */
.sidebar {
  width: 320px;
  background-color: var(--secondary-color);
  display: flex;
  flex-direction: column;
  padding: 20px;
  box-shadow: 5px 0 15px rgba(0,0,0,0.2);
  z-index: 10;
}

.sidebar-header {
  border-bottom: 1px solid var(--grid-color-minor);
  padding-bottom: 15px;
  margin-bottom: 15px;
}
.sidebar-header h2 { margin: 0; color: white; }
.sidebar-header p { margin: 5px 0 0; font-size: 0.9em; opacity: 0.7; }

.function-list { flex-grow: 1; overflow-y: auto; }

.function-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  padding: 10px;
  background: var(--background-color);
  border-radius: 8px;
  transition: opacity 0.3s;
}

.function-item.hidden-func {
    opacity: 0.5;
}

.function-color {
    width: 20px;
    height: 20px;
    border-radius: 5px;
    margin-right: 15px;
    flex-shrink: 0;
    cursor: pointer;
}

.function-expression {
    flex-grow: 1;
    font-family: monospace;
    font-size: 1.1em;
    word-break: break-all;
    cursor: pointer;
}

.delete-function-btn { background: none; border: none; color: var(--text-color); font-size: 1.5em; cursor: pointer; opacity: 0.5; transition: opacity 0.2s; }
.delete-function-btn:hover { opacity: 1; }

.add-function-group { display: flex; margin-top: 15px; }

#function-input {
  flex-grow: 1;
  padding: 10px;
  border: 1px solid var(--grid-color-minor);
  background: var(--background-color);
  color: var(--text-color);
  border-radius: 8px 0 0 8px;
  outline: none;
  font-size: 1em;
}

#toggle-keyboard-btn {
    padding: 0 12px;
    border: none;
    background-color: #3c4060;
    color: white;
    font-size: 1.2em;
    cursor: pointer;
    transition: background-color 0.2s;
    border-left: 1px solid #4a4e72;
}

#add-function-btn {
  padding: 0 15px;
  border: none;
  background-color: var(--primary-color);
  color: white;
  font-size: 1.5em;
  border-radius: 0 8px 8px 0;
  cursor: pointer;
  transition: background-color 0.2s, color 0.2s;
}
#add-function-btn.edit-mode {
    background-color: #28a745; /* Color verde para modo edición */
}

#add-function-btn:hover { background-color: #5867d5; }
#add-function-btn.edit-mode:hover { background-color: #218838; }
#toggle-keyboard-btn:hover { background-color: #4a4e72; }

.error-message {
    color: var(--error-color);
    font-size: 0.9em;
    height: 20px;
    margin-top: 8px;
    text-align: center;
}

/* --- Teclado Virtual --- */
.virtual-keyboard {
    padding: 10px 0;
    margin-top: 15px;
    border-top: 1px solid var(--grid-color-minor);
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.virtual-keyboard.hidden { display: none; }
.keyboard-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
.keyboard-button { padding: 12px 5px; border: none; background: var(--background-color); color: var(--text-color); font-size: 1em; font-family: 'Poppins', sans-serif; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
.keyboard-button:hover { background-color: #3c4060; }
.keyboard-button.active-mode { background-color: var(--primary-color); }
.keyboard-button.wide { grid-column: span 2; }

/* --- Área Principal y Controles (sin cambios) --- */
.main-content { flex-grow: 1; position: relative; }
.chart-container { width: 100%; height: 100%; }
#grafica { cursor: grab; background-color: var(--background-color); }
#grafica:active { cursor: grabbing; }
.chart-controls { position: absolute; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; }
.chart-controls button { width: 40px; height: 40px; border: none; background-color: var(--secondary-color); color: var(--text-color); border-radius: 50%; font-size: 1.5em; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.3); transition: background-color 0.2s; }
.chart-controls button:hover { background-color: #3c4060; }